---
title: "TRABAJO 3"
author:
  - María Paula Camargo Rincón
  - Laura Katherin Martinez Castiblanco
  - Yudy Vanessa Puerres Rosero
date: "2025-12-13"
output: pdf_document
---

```{r, include=FALSE}
rm(list=ls())
```

# librerías

```{r message=FALSE, warning=FALSE, show=F}
#install.packages("readxl")
#install.packages("knitr")
#install.packages("forecast")
#install.packages("FinTS")
#install.packages("dplyr")
#install.packages("ggplot2")
#install.packages("lubridate")
#install.packages("zoo")
#install.packages("nortest")
library(readxl) # Para leer el csv
library(knitr) # Para obtener la tabla en el pdf a partir de una tabla en r
library(forecast) # para el lambda de box-cox
library(tseries) # prueba de estacionariedad adf
library(FinTS)
library(dplyr) # para manejo de datos
library(ggplot2) # para gráficas
library(lubridate) # fechas
library(zoo) #imputación de datos faltantes
library(nortest) # para prueba kolmogorov
```
# Descripción de los datos:

## Base de datos

La base de datos utilizada proviene del conjunto de datos público disponible en la plataforma Kaggle ([Rohan Rao, 2020](https://www.kaggle.com/datasets/rohanrao/air-quality-data-in-india)).
Este conjunto fue recopilado originalmente por el Central Pollution Control Board (CPCB**)**, organismo oficial del Gobierno de la India encargado del monitoreo ambiental.

Para este estudio, se utilizó la versión diaria del conjunto de datos, enfocándose exclusivamente en la variable PM2.5 (µg/m³) (partículas en suspensión con diámetro aerodinámico $\leq$ 2.5 µm) registrada en la ciudad de Delhi.
La serie abarca el período comprendido entre el 1 de enero de 2015 y el 6 de diciembre de 2020, con observaciones diarias.

```{r paged.print=TRUE}
aire <- read_excel("Datos_India.xlsx")
aire <- aire %>% arrange(Date)
knitr::kable(head(aire,10),
             caption = "Primeros 10 datos",
             digits = 4)  # redondea a 4 decimales
```

Además de PM2.5, el conjunto incluye el Índice de Calidad del Aire (AQI) y su clasificación categórica (*AQI_Bucket*), que divide la calidad del aire en seis niveles: *Good*, *Satisfactory*, *Moderate*, *Poor*, *Very Poor* y *Severe*.
Sin embargo, dado que el objetivo del análisis es modelar la dinámica temporal de la concentración de PM2.5, se trabajó únicamente con la variable numérica continua.

```{r warning=FALSE, paged.print=TRUE}
# Convertir 'City' y 'AQI_Bucket' a variables de tipo factor
aire$City <- as.factor(aire$City)
aire$AQI_Bucket <- as.factor(aire$AQI_Bucket)

# Convertir 'Date' a una variable de fecha, especificando el formato
aire$Date <- as.Date(aire$Date, format = "%d/%m/%Y")

summary(aire)

str(aire)
```

## Evaluación de base de datos

```{r}
# Agrupar por fecha y contar el número de registros
daily_counts <- aire %>%
  group_by(Date) %>%
  summarise(count = n())

# Filtrar las fechas que tienen más de un registro
dates_with_duplicates <- daily_counts %>%
  filter(count > 1)

# Mostrar las fechas con registros duplicados
if (nrow(dates_with_duplicates) > 0) {
  cat("Días con más de un valor de PM2.5:\n")
  print(dates_with_duplicates)
} else {
  cat("No hay días con más de un valor de PM2.5\n")
}
# eliminar daily_counts para liberar memoria
rm(daily_counts)
```

El conjunto inicial contiene 2,009 observaciones.
Se identificaron 2 valores faltantes en la variable `PM2.5` y 10 en `AQI_Bucket`.
Dado que el AQI no se utilizará en el modelado, se centró la atención en imputar los valores ausentes de PM2.5.
Se aplicó interpolación lineal mediante la función `na.approx()` del paquete `zoo`, asumiendo que la evolución de la contaminación en el corto plazo no es drástica.

```{r paged.print=TRUE}
aire[!complete.cases(aire), ]
# Usar interpolación lineal para rellenar valores faltantes en 'PM2.5'
# Podemos usar la función na.approx del paquete zoo para la interpolación lineal.
aire$`PM2.5` <- na.approx(aire$`PM2.5`)

# Verificar que no haya más valores faltantes en 'PM2.5'
missing_pm25_after_imputation <- sum(is.na(aire$`PM2.5`))
cat("Número de datos faltantes en 'PM2.5' después de la imputación:", missing_pm25_after_imputation, "\n")
```

Las estadísticas resumen de la serie de PM2.5 revelan una distribución altamente asimétrica hacia la derecha, con una media de 117.104 µg/m³, una mediana de 94.49 µg/m³ y un máximo extremo de 685.36 µg/m³.

```{r paged.print=TRUE}
# Estadísticas descriptivas
summary_stats <- aire %>%
  summarise(
    Media = mean(PM2.5, na.rm = TRUE),
    Mediana = median(PM2.5, na.rm = TRUE),
    Desv_Est = sd(PM2.5, na.rm = TRUE),
    Min = min(PM2.5, na.rm = TRUE),
    Max = max(PM2.5, na.rm = TRUE)
  )

kable(summary_stats, digits = 3, caption = "Estadísticas descriptivas de PM2.5 ")
```

# Identificación de modelos